---
layout: post
category: star
---

最近看到一个讲述JS历史的翻译项目，挺有意思的，打算边读边对其中的内容写一些自己的读后感，深入了解一下JS的历史

项目地址：

[JavaScript 二十年](https://github.com/doodlewind/jshistory-cn)

---

# 目录

- [语言诞生](#语言诞生)
	- [史前时代](#史前时代)
	- [早期版本](#早期版本)
	- [诞生花絮](#诞生花絮)
- [创立标准](#创立标准)
- [改革失败](#改革失败)
- [继往开来](#继往开来)

---

# [语言诞生](#语言诞生)

## [史前时代](#史前时代)

史前时代主要讲述了1994-1995年间，JS之父Brendan Eich在十天的期限内完成了JS的故事，Eich在网景工作之前就一直从事语言开发的相关工作，所以才使得这样的英雄壮举得以实现。

还有一些很关键的内容，首先JS是一个时势造英雄的产物，网景和Sun达成了合作共同抵制微软，所以需要开发一款独立的"脚本语言”，同时出于公司高管的商业要求，这个东西要“像”Java，但是又不能撼动Java的地位，于是产生了一些奇怪的设计，而eval和with这两个备受诟病的设计也是这时候弄进来的。

JS最开始的设计就是基于对象的，没有基于类主要是出于成本和防止和Java直接竞争的原因，JS开发之初本是希望作为类似Java的一个脚本语言，不过后面渐行渐远了。

除此之外——

>在盖茨的直接领导下，微软已经迅速意识到它们即将推出的封闭生态信息应用 Blackbird 项目 [Anderson 2007]，在跨平台 Web 的兴起之下将无足轻重。因此，盖茨的「互联网浪潮」备忘录 [Gates 1995] 将微软的战略从 Blackbird 重新引导到了 Internet Explorer 与一整套服务器产品上，以应对 Netscape 的攻城略地。

盖茨本来是想在浏览器上搞垄断的，只不过迫于形式才屈从于“跨平台”，我大胆猜测也是出于这样的商业考量微软最终放弃了浏览器团队，最终导致Chrome的崛起。

## [早期版本](#早期版本)

这一部分的内容大致介绍了一下初代版本的JS，这个版本其实已经相对完善了，大部分基础的操作都是借鉴自C语言，有一些奇怪的特性来自Java，还有一些东西来自其他的语言。

总体而言，Eich高超的水平保证了这个语言的起点很高，但是脚本语言的定位和所谓为了”易用性“的定位使得语言的严谨性被破坏，同时仓促的开发页遗留了很多bug，Eich和网景可能在开发之初也没有想到JS后面的成功，否则可能投入更多的资源来开发。

## [诞生花絮](#诞生花絮)

后面简要介绍了一些早期的花絮内容。

首先让我感兴趣的还是微软对于JS的态度，由于Eich的个人能力突出，使得网景早一步将脚本语言应用在浏览器上成为现实，而微软反应过来为时已晚，不得不兼容JS抢占市场份额，时隔这么多年，我们依然可以从文字中领略到硝烟弥漫的商业竞争。

>IE 团队非常重视与 Netscape 的竞争。他们希望当时作为 Active Scripting 一部分的脚本调试器能够吸引到 JavaScript Web 开发者使用 IE，因为 Netscape 没有 JavaScript 调试器。但他们也了解到，与 Netscape 浏览器的网站互操作性对于推广 IE 至关重要。于是 Shon Katzenberger 和其他人针对数千个使用 JavaScript 的网站运行了 IE 3 的开发版本，并将结果同 Netscape 2 与 Netscape 3 做了比较。每当发现差异时，Katzenberger 都必须对 Netscape JavaScript 的行为做逆向工程，以了解其不同之处。其中有些行为让他们非常吃惊。当他们发现在 Netscape 的实现中 HTML 页框竟然共享一个公共的对象地址空间并可以自由交换对象时，更是尤其让他们震惊。IE 已将页框实现为隔离的环境，因此需要大量的重新设计才能使对象在其中传递。

除此之外，Eich真的就是永远的神，领略一下神的风采：

>在 1995 年全年和 1996 年的大部分时间里，Brendan Eich 都是唯一全职从事 JavaScript 引擎开发工作的 Netscape 开发者。在 1996 年 8 月发布的 Netscape 3.0 版本中，JavaScript 1.1 仍然主要包含 1995 年 5 月的 10 天原型代码。在发布这个版本后，Eich 认为是时候偿还引擎的技术债，并努力使 JavaScript「成为一门更干净的语言」了。但 Netscape 管理层则希望他研究语言规范。他们对微软针对 JavaScript 规范缺失的批评很敏感，并认为即将开始的语言标准化进程需要这样一份规范作为输入。Eich 拒绝了，他想把重新实现 Mocha 作为开始。要想编写规范，他需要的是仔细检查 Mocha 的实现。他认为在检查 Mocha 时重写 Mocha 是最有效率的方法，这也能让他在初始的设计错误被纳入规范前纠正它们。
>
>由于对辩论感到沮丧，Brendan Eich 离开办公室，在家工作了两个星期。在此期间，他重新设计实现了 JavaScript 引擎的核心。此举的收获是一个更快、更可靠和更灵活的运行引擎。他舍弃了将 JavaScript 值表示为差异联合体的实践，改为使用包含即时原始值的标记指针（tagged pointer）。他还实现了诸如嵌套函数、函数表达式和 switch 语句之类的特性，这些特性从未在原始引擎中实现过。基于引用计数的内存管理器也被替换成了基于标记 / 清除算法的垃圾收集器。

---

