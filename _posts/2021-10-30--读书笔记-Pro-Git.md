---
layout: post
category: star
title: 读书笔记:Pro Git 中文版
---

书籍名称：Pro Git 中文版

一本介绍 Git 的小书，看看写了些什么。

---

## 目录

- [起步](#起步)
- [Git 基础](#git-基础)
- [Git 分支](#git-分支)

---

## 起步

本地版本控制系统（简单数据库记录文件各次变动差异）-> 集中化的版本控制系统（CVCS）-> 分布式版本控制系统（D VCS）

分布式体现在不仅仅是将最新的文件下载下来，而是整个仓库的镜像，可以理解成集中式只是一些最新的文件，而分布式是一个“本地版本控制系统”，可以用这个恢复远端数据库。

Git 是 Linux 社区开发的产物（ps.伟大的开源！伟大的 Linux！）。

其他分布式管理系统保存一组基本文件和每个文件随着时间逐步积累的差异：

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-10-30 下午6.19.47.png" alt="其他分布式版本管理系统运行的方式" style="zoom: 25%;" />

Git 将数据看成小型文件系统的一组快照：

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-10-30 下午6.24.18.png" alt="存储一组快照" style="zoom: 25%;" />

Git 的工作区、暂存区和 Git 仓库：

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-10-30 下午6.30.51.png" alt="Git 的一些概念" style="zoom: 25%;" />

---

## Git 基础

工作目录下的文件只有可能是两种状态其中之一：已跟踪或者未跟踪。

已跟踪文件表示被纳入版本控制的文件，可能处于：未修改、已修改、已放入暂存区。

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-01 下午6.40.01.png" alt="文件的状态变化周期" style="zoom: 50%;" />

### 忽略文件

文件 .gitignore 的格式规范如下：

- #开头的行表示注释
- 使用标准的 glob 模式匹配
- 匹配模式可以以 / 开头防止递归
- 匹配模式可以以 / 结尾指定目录
- ！取反

```
# no .a files
*.a

# but do track lib.a, even though you're ignoring .a files above
!lib.a

# only ignore the TODO file in the current directory, not subdir/TODO
/TODO

# ignore all files in the build/ directory
build/

# ignore doc/notes.txt, but not doc/server/arch.txt
doc/*.txt

# ignore all .pdf files in the doc/ directory
doc/**/*.pdf
```

---

## Git 分支

Git 使用 blob 对象来保存文件快照，当首次提交时，存在一个包含提交信息的 commit 对象、对应文件索引的 tree 对象，还有对应文件快照的 blob 对象：

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-04 下午5.19.10.png" alt="首次提交时 Git 结构" style="zoom: 25%;" />

修改内容后再次提交，本次提交对象将会包含一个指向上次提交对象（父对象）的指针。

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.27.58.png" style="zoom: 33%;" />

git branch 创建一个新的，可以移动的指针：

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.31.42.png" style="zoom: 33%;" />

git checkout 切换 HEAD 指向的分支：

<img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.33.56.png" style="zoom:33%;" />

在执行 merge 时，如果当前分支是被合并分支的祖先分支，那么执行的操作就仅仅是将指针向右移动：

| <img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.45.01.png" alt="" style="zoom:33%;" /> | <img src="../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.45.38.png" style="zoom:33%;" /> |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

当需要合并两个并非以上情况的分支时，需要做一次三方合并：

| ![](../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.52.10.png) | ![](../img/2021-10-30--读书笔记-Pro-Git/截屏2021-11-16 下午7.52.39.png) |
| ------------------------------------------------------------ | ------------------------------------------------------------ |

